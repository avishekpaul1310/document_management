{% extends 'documents/base.html' %}

{% block content %}
<div class="card">
    <div class="card-body">
        <h3 class="card-title">{{ document.title }}</h3>
        <p class="card-text">{{ document.description }}</p>
        <p class="card-text">
            <small class="text-muted">
                Category: {{ document.category.name }}<br>
                Uploaded: {{ document.uploaded_at|date:"M d, Y" }}<br>
                By: {{ document.owner.username }}<br>
                Privacy: {% if document.is_private %}Private{% else %}Public{% endif %}<br>
                Status: {% if document.is_archived %}<span class="badge bg-secondary">Archived</span>{% else %}<span class="badge bg-success">Active</span>{% endif %}
                {% if document.is_archived %}<br>Archived on: {{ document.archived_at|date:"M d, Y" }}{% endif %}
            </small>
        </p>
        
        <div class="mt-3">
            <a href="{{ document.file.url }}" class="btn btn-primary" target="_blank">Download</a>
            {% if document.owner == request.user %}
                {% if not document.is_archived %}
                    <a href="{% url 'edit_document' document.pk %}" class="btn btn-warning">Edit</a>
                    <a href="{% url 'archive_document' document.pk %}" class="btn btn-secondary">Archive</a>
                {% else %}
                    <a href="{% url 'restore_document' document.pk %}" class="btn btn-info">Restore</a>
                {% endif %}
                <a href="{% url 'delete_document' document.pk %}" class="btn btn-danger">Delete</a>
            {% endif %}
            {% if not document.is_archived %}
                <a href="{% url 'dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
            {% else %}
                <a href="{% url 'archived_documents' %}" class="btn btn-secondary">Back to Archives</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}